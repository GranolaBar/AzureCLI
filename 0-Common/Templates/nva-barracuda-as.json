{
    "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    
    "parameters": {
        "virtualMachines_NGF_NVA1_adminPassword": { "type": "securestring", "defaultValue": ""                                           },
        "virtualMachines_NGF_NVA2_adminPassword": { "type": "securestring", "defaultValue": ""                                           },
                 
                  "availabilitySets_NVA_AS_name": { "type": "string",       "defaultValue": "NVA-AS"                                     },
                 "virtualMachines_NGF_NVA1_name": { "type": "string",       "defaultValue": "NGF-NVA1"                                   },
                 "virtualMachines_NGF_NVA2_name": { "type": "string",       "defaultValue": "NGF-NVA2"                                   },
    
            "networkInterfaces_ngf_nva1862_name": { "type": "string",       "defaultValue": "ngf-nva1862"                                },
            "networkInterfaces_ngf_nva2401_name": { "type": "string",       "defaultValue": "ngf-nva2401"                                },
    
               "publicIPAddresses_NGF_NVA1_name": { "type": "string",       "defaultValue": "NGF-NVA1"                                   },
               "publicIPAddresses_NGF_NVA2_name": { "type": "string",       "defaultValue": "NGF-NVA2"                                   },
                
                "virtualNetworks_nTier_NVA_name": { "type": "string",       "defaultValue": "nTier-NVA"                                  },
             
             "storageAccounts_ntiernva2925_name": { "type": "string",       "defaultValue": "ntiernva2925"                               
     },

    "variables": { },
  
    "resources": [
        {
            "comments": "Generalized from resource: '/subscriptions/d520400f-6874-43f2-9ed9-3850af521c18/resourceGroups/nTier-NVA/providers/Microsoft.Compute/availabilitySets/NVA-AS'.",
            "type": "Microsoft.Compute/availabilitySets",
            "name": "[parameters('availabilitySets_NVA_AS_name')]",
            "apiVersion": "2015-06-15",
            "location": "centralus",
      
            "properties": {
                "platformUpdateDomainCount": 5,
                "platformFaultDomainCount": 3
      },
           "dependsOn": [ ]
    },
    {
            "comments": "Generalized from resource: '/subscriptions/d520400f-6874-43f2-9ed9-3850af521c18/resourceGroups/nTier-NVA/providers/Microsoft.Compute/virtualMachines/NGF-NVA1'.",
            "type": "Microsoft.Compute/virtualMachines",
            "name": "[parameters('virtualMachines_NGF_NVA1_name')]",
            "apiVersion": "2015-06-15",
            "location": "centralus",
                 "plan": {
                    "name": "hourly",
                    "product": "barracuda-ng-firewall",
                    "publisher": "barracudanetworks"
      },
            "properties": {
                "availabilitySet": {
                     "id": "[resourceId('Microsoft.Compute/availabilitySets', parameters('availabilitySets_NVA_AS_name'))]"
        },
            "hardwareProfile": {
                 "vmSize": "Standard_A1"
        },
            "storageProfile": {
            "imageReference": {
            "publisher": "barracudanetworks",
            "offer": "barracuda-ng-firewall",
            "sku": "hourly",
            "version": "latest"
          },
            "osDisk": {
                 "name": "[parameters('virtualMachines_NGF_NVA1_name')]",
                 "createOption": "FromImage",
                 "vhd": {
                  "uri": "[concat('https', '://', parameters('storageAccounts_ntiernva2925_name'), '.blob.core.windows.net', concat('/vhds/', parameters('virtualMachines_NGF_NVA1_name'),'201652211595.vhd'))]"
            },
            "caching": "ReadWrite"
          },
            "dataDisks": [ ]
        },
            "osProfile": {
                 "computerName": "[parameters('virtualMachines_NGF_NVA1_name')]",
                 "adminUsername": "rootadmin",
                 "linuxConfiguration": {
                 "disablePasswordAuthentication": false
          },
            "secrets": [ ],
                 "adminPassword": "[parameters('virtualMachines_NGF_NVA1_adminPassword')]"
        },
            "networkProfile": {
            "networkInterfaces": [
            {
              "id": "[resourceId('Microsoft.Network/networkInterfaces', parameters('networkInterfaces_ngf_nva1862_name'))]"
            }
          ]
        }
      },
            "dependsOn": [
                 "[resourceId('Microsoft.Compute/availabilitySets', parameters('availabilitySets_NVA_AS_name'))]",
                 "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_ntiernva2925_name'))]",
                 "[resourceId('Microsoft.Network/networkInterfaces', parameters('networkInterfaces_ngf_nva1862_name'))]"
      ]
    },
    {
            "comments": "Generalized from resource: '/subscriptions/d520400f-6874-43f2-9ed9-3850af521c18/resourceGroups/nTier-NVA/providers/Microsoft.Compute/virtualMachines/NGF-NVA2'.",
            "type": "Microsoft.Compute/virtualMachines",
            "name": "[parameters('virtualMachines_NGF_NVA2_name')]",
            "apiVersion": "2015-06-15",
            "location": "centralus",
            "plan": {
            "name": "hourly",
            "product": "barracuda-ng-firewall",
            "publisher": "barracudanetworks"
      },
            "properties": {
                 "availabilitySet": {
                     "id": "[resourceId('Microsoft.Compute/availabilitySets', parameters('availabilitySets_NVA_AS_name'))]"
        },
            "hardwareProfile": {
                 "vmSize": "Standard_A1"
        },
            "storageProfile": {
                 "imageReference": {
                 "publisher": "barracudanetworks",
                 "offer": "barracuda-ng-firewall",
                 "sku": "hourly",
                 "version": "latest"
          },
            "osDisk": {
                 "name": "[parameters('virtualMachines_NGF_NVA2_name')]",
                 "createOption": "FromImage",
                 "vhd": {
                 "uri": "[concat('https', '://', parameters('storageAccounts_ntiernva2925_name'), '.blob.core.windows.net', concat('/vhds/', parameters('virtualMachines_NGF_NVA2_name'),'2016522122221.vhd'))]"
            },
            "caching": "ReadWrite"
          },
            "dataDisks": [ ]
        },
           "osProfile": {
               "computerName": "[parameters('virtualMachines_NGF_NVA2_name')]",
               "adminUsername": "rootadmin",
               "linuxConfiguration": {
               "disablePasswordAuthentication": false
          },
            "secrets": [ ],
            "adminPassword": "[parameters('virtualMachines_NGF_NVA2_adminPassword')]"
        },
            "networkProfile": {
                  "networkInterfaces": [
            {
                     "id": "[resourceId('Microsoft.Network/networkInterfaces', parameters('networkInterfaces_ngf_nva2401_name'))]"
            }
          ]
        }
      },
            "dependsOn": [
                 "[resourceId('Microsoft.Compute/availabilitySets', parameters('availabilitySets_NVA_AS_name'))]",
                 "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_ntiernva2925_name'))]",
                 "[resourceId('Microsoft.Network/networkInterfaces', parameters('networkInterfaces_ngf_nva2401_name'))]"
      ]
    },
    {
            "comments": "Generalized from resource: '/subscriptions/d520400f-6874-43f2-9ed9-3850af521c18/resourceGroups/nTier-NVA/providers/Microsoft.Network/networkInterfaces/ngf-nva1862'.",
                 "type": "Microsoft.Network/networkInterfaces",
                 "name": "[parameters('networkInterfaces_ngf_nva1862_name')]",
                 "apiVersion": "2016-03-30",
                 "location": "centralus",
                 "properties": {
                 "ipConfigurations": [
          {
                 "name": "ipconfig1",
                 "properties": {
                     "privateIPAddress": "10.2.0.4",
                     "privateIPAllocationMethod": "Dynamic",
                     "publicIPAddress": {
                        "id": "[resourceId('Microsoft.Network/publicIPAddresses', parameters('publicIPAddresses_NGF_NVA1_name'))]"
              },
            "subnet": {
                "id": "[concat(resourceId('Microsoft.Network/virtualNetworks', parameters('virtualNetworks_nTier_NVA_name')), '/subnets/default')]"
              }
            }
          }
        ],
            "dnsSettings": {
            "dnsServers": [ ]
        },
            "enableIPForwarding": false
      },
            "dependsOn": [
                 "[resourceId('Microsoft.Network/publicIPAddresses', parameters('publicIPAddresses_NGF_NVA1_name'))]",
                 "[resourceId('Microsoft.Network/virtualNetworks', parameters('virtualNetworks_nTier_NVA_name'))]"
      ]
    },
    {
            "comments": "Generalized from resource: '/subscriptions/d520400f-6874-43f2-9ed9-3850af521c18/resourceGroups/nTier-NVA/providers/Microsoft.Network/networkInterfaces/ngf-nva2401'.",
            "type": "Microsoft.Network/networkInterfaces",
            "name": "[parameters('networkInterfaces_ngf_nva2401_name')]",
            "apiVersion": "2016-03-30",
            "location": "centralus",
            "properties": {
            "ipConfigurations": [
          {
            "name": "ipconfig1",
            "properties": {
              "privateIPAddress": "10.2.0.5",
              "privateIPAllocationMethod": "Dynamic",
              "publicIPAddress": {
                "id": "[resourceId('Microsoft.Network/publicIPAddresses', parameters('publicIPAddresses_NGF_NVA2_name'))]"
              },
              "subnet": {
                "id": "[concat(resourceId('Microsoft.Network/virtualNetworks', parameters('virtualNetworks_nTier_NVA_name')), '/subnets/default')]"
              }
            }
          }
        ],
        "dnsSettings": {
          "dnsServers": [ ]
        },
        "enableIPForwarding": false
      },
      "dependsOn": [
        "[resourceId('Microsoft.Network/publicIPAddresses', parameters('publicIPAddresses_NGF_NVA2_name'))]",
        "[resourceId('Microsoft.Network/virtualNetworks', parameters('virtualNetworks_nTier_NVA_name'))]"
      ]
    },
    {
      "comments": "Generalized from resource: '/subscriptions/d520400f-6874-43f2-9ed9-3850af521c18/resourceGroups/nTier-NVA/providers/Microsoft.Network/publicIPAddresses/NGF-NVA1'.",
      "type": "Microsoft.Network/publicIPAddresses",
      "name": "[parameters('publicIPAddresses_NGF_NVA1_name')]",
      "apiVersion": "2016-03-30",
      "location": "centralus",
      "properties": {
        "publicIPAllocationMethod": "Dynamic",
        "idleTimeoutInMinutes": 4
      },
      "dependsOn": [ ]
    },
    {
      "comments": "Generalized from resource: '/subscriptions/d520400f-6874-43f2-9ed9-3850af521c18/resourceGroups/nTier-NVA/providers/Microsoft.Network/publicIPAddresses/NGF-NVA2'.",
      "type": "Microsoft.Network/publicIPAddresses",
      "name": "[parameters('publicIPAddresses_NGF_NVA2_name')]",
      "apiVersion": "2016-03-30",
      "location": "centralus",
      "properties": {
        "publicIPAllocationMethod": "Dynamic",
        "idleTimeoutInMinutes": 4
      },
      "dependsOn": [ ]
    },
    {
      "comments": "Generalized from resource: '/subscriptions/d520400f-6874-43f2-9ed9-3850af521c18/resourceGroups/nTier-NVA/providers/Microsoft.Network/virtualNetworks/nTier-NVA'.",
      "type": "Microsoft.Network/virtualNetworks",
      "name": "[parameters('virtualNetworks_nTier_NVA_name')]",
      "apiVersion": "2016-03-30",
      "location": "centralus",
      "properties": {
        "addressSpace": {
          "addressPrefixes": [
            "10.2.0.0/16"
          ]
        },
       "subnets": [
          {
            "name": "default",
            "properties": {
              "addressPrefix": "10.2.0.0/24"
            }
          }
        ]
      },
      "dependsOn": [ ]
    },
    {
      "comments": "Generalized from resource: '/subscriptions/d520400f-6874-43f2-9ed9-3850af521c18/resourceGroups/ntier-nva/providers/Microsoft.Storage/storageAccounts/ntiernva2925'.",
      "type": "Microsoft.Storage/storageAccounts",
      "sku": {
        "name": "Standard_LRS",
        "tier": "Standard"
      },
      "kind": "Storage",
      "name": "[parameters('storageAccounts_ntiernva2925_name')]",
      "apiVersion": "2016-01-01",
      "location": "centralus",
      "tags": { },
      "properties": { },
      "dependsOn": [ ]
    }
  ]
}
